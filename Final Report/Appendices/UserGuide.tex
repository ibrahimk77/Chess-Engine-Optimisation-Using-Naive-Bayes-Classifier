\chapter{User Guide}

There are two main components of the codebase: one regarding the training of the model and one regarding the playing of chess games.

Before training, it is important to download the kaggle dataset from the link \url{https://www.kaggle.com/datasets/arevel/chess-games} and rename it to \texttt{chess\_games.csv}. It is also important to install all requierd libraries as listed in the \texttt{requirements.txt} file. The main files required for the training of the models are:

\begin{itemize}
    \item \texttt{dataset\_prep.py}: this is the main file to be executed to train the 12 models. This file loads the data, seperates the data into three groups, master level games, beginner level games and a random sample of games. For each combination of dataset and feature set, it preprocesses the data by invoking the \texttt{preprocess\_data} function from \texttt{data\_prep.py}. It then uses the processed data to train the model using the \texttt{train} function from \texttt{training.py}. It then saves the evaluation metrics to a CSV file named \texttt{eval\_results.csv}.
    \item \texttt{data\_prep.py}: this file is used to preprocess the data and prepare it for training. It goes through each game in the dataset, simulates the games and extracts features are certain intervals. The \texttt{preprocess\_data} function returns the processed data, which is then used to train the model.
    \item \texttt{features.py}: contains all the methods to extract each feature. It also extracts features based on the feature set selected.
    \item \texttt{naive\_bayes.py}: This is the main file for the Naive Bayes model. It contains two main methods \texttt{predict} which returns the predicted class for a given set of features and \texttt{predict\_prob} which returns the probabilities for each class. 
    \item \texttt{training.py}: This file is where the main training occurrs. The data is first scaled use the the \texttt{prepare\_data} function. It then splits the data into training and testing data. It invokes the \texttt{fit} method from the \texttt{naive\_bayes.py} file to train the model. It then calculates a number of metrics such as accuracy, precision, recall, kaappa and F1 score and returns these metrics. It also saves the models and scalers to joblib files.
\end{itemize}


Before running the experiments, it is important to install stockfish ideally in the same directory as the \texttt{game.py} file. If it is not downloaded in the same directory, make sure to alter the \texttt{STOCKFISH\_PATH} in the \texttt{game.py} file to the path of the stockfish executable. It can be downloaded from the link \url{https://stockfishchess.org/download/}.
The main files require for the running of the experiments are:

\begin{itemize}
    \item \texttt{experiments.py}: this is the main file to be executed to run the experiments. It goes through all combinations of datasets, feature sets, naive bayes weightings, opponents and implementations and plays 30 games for each combination. It loads the models from the joblib files as well as the respective scalers. It calls the \texttt{play} function from the \texttt{game.py} file to play the games. It then saves the results to a CSV file named \texttt{game\_results.csv}.
    \item \texttt{game.py}: this is file where the game is played. In the \texttt{play} function, it keeps track of a number of metrics. It creates a new board and chooses a move by the engine base don the \texttt{get\_alphaBeta\_move} function, depending on the implementation selected. It then chooses a move either by a random engine or stockfish, depending on the opponent selected. It then continues this until the game is over. It then returns the different metrics of the game to be saved in a CSV file. 
    \item \texttt{minimax.py}: this file contains the \texttt{alphaBeta} function which implements a normal minimax algorithm with alpha beta pruning.
    \item \texttt{minimax\_NB\_integrated.py}: this file contains the \texttt{alphaBeta\_integrated} function which includes the implementation of the MMNB integration algorithm.
    \item \texttt{minimax\_NB\_sub.py}: this file contains the \texttt{alphaBeta\_sub} function which includes the implementation of the MMNB substitution algorithm.
\end{itemize}



% \section{Instructions}
% You must provide an adequate user guide for your software. The guide should provide easily understood instructions on how to use your software. A particularly useful approach is to treat the user guide as a walk-through of a typical session, or set of sessions, which collectively display all of the features of your package. Technical details of how the package works are rarely required. Keep the guide concise and simple. The extensive use of diagrams, illustrating the package in action, can often be particularly helpful. The user guide is sometimes included as a chapter in the main body of the report, but is often better included in an appendix to the main report.
